<div class="min-h-screen bg-app-bg text-app-text p-6 pb-32 font-sans transition-colors duration-500">
  
  <!-- HEADER AVEC ICONE ADAPTIVE -->
  <div class="flex items-center justify-center gap-3 mb-10">
     <lucide-icon name="trophy" class="w-6 h-6 text-brand" [strokeWidth]="2.5"></lucide-icon>
     <h1 class="text-2xl font-black tracking-tight uppercase italic">
       Classement <span class="text-brand">Global</span>
     </h1>
  </div>

  <!-- PODIUM (Top 3) -->
  <div class="flex items-end justify-center gap-2 mb-12 h-64">
    @for (player of store.allEntries().slice(0, 3); track player.pseudo) {
    <div class="flex flex-col items-center flex-1">
      
      <!-- Icone de rang (Couronne ou NumÃ©ro) -->
      <div class="mb-2" [class.animate-bounce]="player.rank === 1">
        @if (player.rank === 1) { 
          <lucide-icon name="crown" class="w-8 h-8 text-yellow-500" [strokeWidth]="2.5"></lucide-icon> 
        }
        @else { 
          <span class="text-xs font-black italic opacity-40">#{{ player.rank }}</span> 
        }
      </div>

      <ql-avatar
        [pseudo]="player.pseudo"
        [size]="player.rank === 1 ? 'lg' : 'md'"
        class="shadow-xl"
      ></ql-avatar>

      <!-- Bloc de podium adaptatif -->
      <div
        [class]="'w-full rounded-t-3xl mt-3 flex flex-col items-center justify-center border-x border-t transition-all duration-500 ' + 
            (player.isMe 
              ? 'bg-brand border-brand/50 text-white shadow-[0_0_30px_rgba(59,130,246,0.3)]' 
              : 'bg-app-card border-app-border')"
        [style.height.px]="player.rank === 1 ? 140 : player.rank === 2 ? 100 : 80"
      >
        <span class="text-2xl font-black italic">{{ player.rank }}</span>
        <span [class]="'text-[10px] uppercase font-black ' + (player.isMe ? 'text-white/80' : 'opacity-50')">
          {{ player.score }} pts
        </span>
      </div>
    </div>
    }
  </div>

  <!-- LISTE DES AUTRES JOUEURS -->
  <div class="space-y-3">
    @for (player of store.allEntries().slice(3); track player.pseudo) {
    <div
      [class]="'p-4 rounded-2xl flex items-center justify-between border transition-all duration-300 ' + 
        (player.isMe 
          ? 'bg-brand/10 border-brand shadow-lg' 
          : 'bg-app-card border-app-border')"
    >
      <div class="flex items-center gap-4">
        <span
          [class]="'font-black text-sm w-4 italic ' + (player.isMe ? 'text-brand' : 'opacity-30')"
        >
          #{{ player.rank }}
        </span>
        
        <ql-avatar [pseudo]="player.pseudo" size="sm"></ql-avatar>
        
        <span class="font-bold text-sm tracking-tight italic">
          {{ player.pseudo }} 
          @if(player.isMe){ 
            <lucide-icon name="user" class="w-3 h-3 inline ml-1 text-brand"></lucide-icon> 
          }
        </span>
      </div>

      <div class="flex flex-col items-end">
        <span [class]="'font-black italic ' + (player.isMe ? 'text-brand' : 'text-app-text')">
          {{ player.score }}
        </span>
        <span class="text-[7px] opacity-40 font-black uppercase tracking-widest">Points</span>
      </div>
    </div>
    }
  </div>
</div>